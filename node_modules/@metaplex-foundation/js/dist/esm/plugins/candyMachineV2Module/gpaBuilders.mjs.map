{"version":3,"file":"gpaBuilders.mjs","sources":["../../../../src/plugins/candyMachineV2Module/gpaBuilders.ts"],"sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport { GpaBuilder } from '@/utils';\n\ntype AccountDiscriminator = [\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number\n];\n// TODO(thlorenz): copied from candy machine SDK\n// SDK should either provide a GPA builder or expose this discriminator\nconst candyMachineV2Discriminator: AccountDiscriminator = [\n  51, 173, 177, 113, 25, 241, 109, 189,\n];\n\nconst AUTHORITY = candyMachineV2Discriminator.length;\nconst WALLET = AUTHORITY + PublicKey.default.toBytes().byteLength;\n\nexport class CandyMachineV2GpaBuilder extends GpaBuilder {\n  whereDiscriminator(discrimator: AccountDiscriminator) {\n    return this.where(0, Buffer.from(discrimator));\n  }\n\n  candyMachineAccounts() {\n    return this.whereDiscriminator(candyMachineV2Discriminator);\n  }\n\n  // wallet same as solTreasury\n  candyMachineAccountsForWallet(wallet: PublicKey) {\n    return this.candyMachineAccounts().where(WALLET, wallet.toBase58());\n  }\n\n  candyMachineAccountsForAuthority(authority: PublicKey) {\n    return this.candyMachineAccounts().where(AUTHORITY, authority.toBase58());\n  }\n}\n"],"names":["candyMachineV2Discriminator","AUTHORITY","length","WALLET","PublicKey","default","toBytes","byteLength","CandyMachineV2GpaBuilder","GpaBuilder","whereDiscriminator","discrimator","where","Buffer","from","candyMachineAccounts","candyMachineAccountsForWallet","wallet","toBase58","candyMachineAccountsForAuthority","authority"],"mappings":";;;AAaA;AACA;AACA,MAAMA,2BAAiD,GAAG,CACxD,EADwD,EACpD,GADoD,EAC/C,GAD+C,EAC1C,GAD0C,EACrC,EADqC,EACjC,GADiC,EAC5B,GAD4B,EACvB,GADuB,CAA1D,CAAA;AAIA,MAAMC,SAAS,GAAGD,2BAA2B,CAACE,MAA9C,CAAA;AACA,MAAMC,MAAM,GAAGF,SAAS,GAAGG,SAAS,CAACC,OAAV,CAAkBC,OAAlB,EAAA,CAA4BC,UAAvD,CAAA;AAEO,MAAMC,wBAAN,SAAuCC,UAAvC,CAAkD;EACvDC,kBAAkB,CAACC,WAAD,EAAoC;IACpD,OAAO,IAAA,CAAKC,KAAL,CAAW,CAAX,EAAcC,MAAM,CAACC,IAAP,CAAYH,WAAZ,CAAd,CAAP,CAAA;AACD,GAAA;;AAEDI,EAAAA,oBAAoB,GAAG;AACrB,IAAA,OAAO,IAAKL,CAAAA,kBAAL,CAAwBV,2BAAxB,CAAP,CAAA;AACD,GAPsD;;;EAUvDgB,6BAA6B,CAACC,MAAD,EAAoB;IAC/C,OAAO,IAAA,CAAKF,oBAAL,EAAA,CAA4BH,KAA5B,CAAkCT,MAAlC,EAA0Cc,MAAM,CAACC,QAAP,EAA1C,CAAP,CAAA;AACD,GAAA;;EAEDC,gCAAgC,CAACC,SAAD,EAAuB;IACrD,OAAO,IAAA,CAAKL,oBAAL,EAAA,CAA4BH,KAA5B,CAAkCX,SAAlC,EAA6CmB,SAAS,CAACF,QAAV,EAA7C,CAAP,CAAA;AACD,GAAA;;AAhBsD;;;;"}