{"version":3,"file":"KeypairIdentityDriver.mjs","sources":["../../../../src/plugins/keypairIdentity/KeypairIdentityDriver.ts"],"sourcesContent":["import * as ed25519 from '@noble/ed25519';\nimport { Keypair, PublicKey, Transaction } from '@solana/web3.js';\nimport { IdentityDriver } from '../identityModule';\nimport { KeypairSigner } from '@/types';\n\nexport class KeypairIdentityDriver implements IdentityDriver, KeypairSigner {\n  public readonly keypair: Keypair;\n  public readonly publicKey: PublicKey;\n  public readonly secretKey: Uint8Array;\n\n  constructor(keypair: Keypair) {\n    this.keypair = keypair;\n    this.publicKey = keypair.publicKey;\n    this.secretKey = keypair.secretKey;\n  }\n\n  public async signMessage(message: Uint8Array): Promise<Uint8Array> {\n    return ed25519.sync.sign(message, this.secretKey.slice(0, 32));\n  }\n\n  public async signTransaction(transaction: Transaction): Promise<Transaction> {\n    transaction.partialSign(this.keypair);\n\n    return transaction;\n  }\n\n  public async signAllTransactions(\n    transactions: Transaction[]\n  ): Promise<Transaction[]> {\n    return Promise.all(\n      transactions.map((transaction) => this.signTransaction(transaction))\n    );\n  }\n}\n"],"names":["KeypairIdentityDriver","constructor","keypair","publicKey","secretKey","signMessage","message","ed25519","sync","sign","slice","signTransaction","transaction","partialSign","signAllTransactions","transactions","Promise","all","map"],"mappings":";;AAKO,MAAMA,qBAAN,CAAqE;EAK1EC,WAAW,CAACC,OAAD,EAAmB;IAC5B,IAAKA,CAAAA,OAAL,GAAeA,OAAf,CAAA;AACA,IAAA,IAAA,CAAKC,SAAL,GAAiBD,OAAO,CAACC,SAAzB,CAAA;AACA,IAAA,IAAA,CAAKC,SAAL,GAAiBF,OAAO,CAACE,SAAzB,CAAA;AACD,GAAA;;EAEuB,MAAXC,WAAW,CAACC,OAAD,EAA2C;AACjE,IAAA,OAAOC,OAAO,CAACC,IAAR,CAAaC,IAAb,CAAkBH,OAAlB,EAA2B,IAAKF,CAAAA,SAAL,CAAeM,KAAf,CAAqB,CAArB,EAAwB,EAAxB,CAA3B,CAAP,CAAA;AACD,GAAA;;EAE2B,MAAfC,eAAe,CAACC,WAAD,EAAiD;AAC3EA,IAAAA,WAAW,CAACC,WAAZ,CAAwB,IAAA,CAAKX,OAA7B,CAAA,CAAA;AAEA,IAAA,OAAOU,WAAP,CAAA;AACD,GAAA;;EAE+B,MAAnBE,mBAAmB,CAC9BC,YAD8B,EAEN;AACxB,IAAA,OAAOC,OAAO,CAACC,GAAR,CACLF,YAAY,CAACG,GAAb,CAAkBN,WAAD,IAAiB,KAAKD,eAAL,CAAqBC,WAArB,CAAlC,CADK,CAAP,CAAA;AAGD,GAAA;;AA3ByE;;;;"}