{"version":3,"sources":["../../src/modules/index.ts","../../src/utils/index.ts","../../src/modules/session.ts","../../src/modules/webhook.ts"],"sourcesContent":["export * from \"./session\";\nexport * from \"./webhook\";\n","import { tokens } from \"../constants\";\nimport { SupportedSplTokens } from \"../types\";\n\n/**\n * Returns mint address of the supported SPL token\n */\nexport const getSupportedTokenMintAddress = (\n  token: SupportedSplTokens | \"sol\" | \"usdc\"\n) => {\n  return tokens.get(token);\n};\n\n/**\n * Precise round a number\n */\nexport const preciseRound = (number: number, precision: number) => {\n  const multiplier = !!precision ? Math.pow(10, precision) : 1;\n  return Math.ceil(number * multiplier) / multiplier;\n};\n","import { Client } from \"../client\";\nimport { CreateSessionOptions, CreateSessionResponse } from \"../interfaces\";\nimport { preciseRound } from \"../utils\";\n\nexport class Session {\n  private client: Client;\n  private network: string;\n  private config: object;\n\n  constructor(client: Client, network: string, config: object) {\n    this.client = client;\n    this.network = network;\n    this.config = config;\n  }\n\n  /**\n   * It takes in an object, makes a POST request to the /session endpoint, and returns\n   * the response data\n   * @param {CreateSessionOptions} options - SessionOptions\n   * @returns The response data from the API call.\n   */\n  async create(options: CreateSessionOptions): Promise<CreateSessionResponse> {\n    try {\n      let amount = preciseRound(\n        options.items.reduce(\n          (index, { price, quantity }) => index + price * quantity,\n          0\n        ),\n        3\n      );\n\n      if (options.shipping_fees) {\n        amount = preciseRound(amount + options.shipping_fees, 3);\n      }\n\n      const parameters = {\n        ...options,\n        network: this.network,\n        amount,\n        config: this.config,\n      };\n\n      const response = await this.client.post(`/session`, parameters);\n      return response.data;\n    } catch (err) {\n      throw new Error(err);\n    }\n  }\n}\n","import { Webhook as SvixWebhook } from \"svix\";\n\nimport { Client } from \"../client\";\nimport {\n  WebhookRegisterOptions,\n  WebhookRegisterResponse,\n  WebhookVerifyOptions,\n} from \"../interfaces\";\n\nexport class Webhook {\n  private client: Client;\n\n  constructor(client: Client) {\n    this.client = client;\n  }\n\n  /**\n   * It takes in an object, makes a POST request to the /webhook endpoint, and returns the response data\n   * @param {WebhookRegisterOptions} options - WebhookOptions\n   */\n  async register(\n    options: WebhookRegisterOptions\n  ): Promise<WebhookRegisterResponse> {\n    try {\n      const response = await this.client.post(`/webhook`, options);\n\n      return response.data;\n    } catch (err) {\n      throw new Error(err);\n    }\n  }\n\n  /**\n   * A helper function to verify the webhook's signature in the headers\n   */\n  async verify(options: WebhookVerifyOptions) {\n    const svixWebhook = new SvixWebhook(options.webhook_secret);\n    try {\n      await svixWebhook.verify(options.payload, options.headers);\n    } catch (err) {\n      throw new Error(\"Invalid webhook signature\");\n    }\n  }\n}\n"],"mappings":"syBAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,EAAA,YAAAC,IAAA,eAAAC,EAAAJ,GCeO,IAAMK,EAAeC,EAAA,CAACC,EAAgBC,IAAsB,CACjE,IAAMC,EAAeD,EAAY,KAAK,IAAI,GAAIA,CAAS,EAAI,EAC3D,OAAO,KAAK,KAAKD,EAASE,CAAU,EAAIA,CAC1C,EAH4B,gBCXrB,IAAMC,EAAN,KAAc,CAKnB,YAAYC,EAAgBC,EAAiBC,EAAgB,CAC3D,KAAK,OAASF,EACd,KAAK,QAAUC,EACf,KAAK,OAASC,CAChB,CAQA,MAAM,OAAOC,EAA+D,CAC1E,GAAI,CACF,IAAIC,EAASC,EACXF,EAAQ,MAAM,OACZ,CAACG,EAAO,CAAE,MAAAC,EAAO,SAAAC,CAAS,IAAMF,EAAQC,EAAQC,EAChD,CACF,EACA,CACF,EAEIL,EAAQ,gBACVC,EAASC,EAAaD,EAASD,EAAQ,cAAe,CAAC,GAGzD,IAAMM,EAAaC,EAAAC,EAAA,GACdR,GADc,CAEjB,QAAS,KAAK,QACd,OAAAC,EACA,OAAQ,KAAK,MACf,GAGA,OADiB,MAAM,KAAK,OAAO,KAAK,WAAYK,CAAU,GAC9C,IAClB,OAASG,EAAP,CACA,MAAM,IAAI,MAAMA,CAAG,CACrB,CACF,CACF,EA5CaC,EAAAd,EAAA,WCJb,IAAAe,EAAuC,gBAShC,IAAMC,EAAN,KAAc,CAGnB,YAAYC,EAAgB,CAC1B,KAAK,OAASA,CAChB,CAMA,MAAM,SACJC,EACkC,CAClC,GAAI,CAGF,OAFiB,MAAM,KAAK,OAAO,KAAK,WAAYA,CAAO,GAE3C,IAClB,OAASC,EAAP,CACA,MAAM,IAAI,MAAMA,CAAG,CACrB,CACF,CAKA,MAAM,OAAOD,EAA+B,CAC1C,IAAME,EAAc,IAAI,EAAAC,QAAYH,EAAQ,cAAc,EAC1D,GAAI,CACF,MAAME,EAAY,OAAOF,EAAQ,QAASA,EAAQ,OAAO,CAC3D,OAASC,EAAP,CACA,MAAM,IAAI,MAAM,2BAA2B,CAC7C,CACF,CACF,EAlCaG,EAAAN,EAAA","names":["modules_exports","__export","Session","Webhook","__toCommonJS","preciseRound","__name","number","precision","multiplier","Session","client","network","config","options","amount","preciseRound","index","price","quantity","parameters","__spreadProps","__spreadValues","err","__name","import_svix","Webhook","client","options","err","svixWebhook","SvixWebhook","__name"]}