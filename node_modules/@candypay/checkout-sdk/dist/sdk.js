var C=Object.create;var n=Object.defineProperty,A=Object.defineProperties,v=Object.getOwnPropertyDescriptor,W=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,T=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var l=(o,e,t)=>e in o?n(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,k=(o,e)=>{for(var t in e||(e={}))f.call(e,t)&&l(o,t,e[t]);if(u)for(var t of u(e))L.call(e,t)&&l(o,t,e[t]);return o},w=(o,e)=>A(o,W(e)),r=(o,e)=>n(o,"name",{value:e,configurable:!0});var U=(o,e)=>{for(var t in e)n(o,t,{get:e[t],enumerable:!0})},g=(o,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of q(e))!f.call(o,i)&&i!==t&&n(o,i,{get:()=>e[i],enumerable:!(s=v(e,i))||s.enumerable});return o};var _=(o,e,t)=>(t=o!=null?C(T(o)):{},g(e||!o||!o.__esModule?n(t,"default",{value:o,enumerable:!0}):t,o)),P=o=>g(n({},"__esModule",{value:!0}),o);var M={};U(M,{CandyPay:()=>h});module.exports=P(M);var b="https://candypay-checkout-production.up.railway.app/api/v1";var m=r((o,e)=>{let t=e?Math.pow(10,e):1;return Math.ceil(o*t)/t},"preciseRound");var p=class{constructor(e,t,s){this.client=e,this.network=t,this.config=s}async create(e){try{let t=m(e.items.reduce((x,{price:y,quantity:R})=>x+y*R,0),3);e.shipping_fees&&(t=m(t+e.shipping_fees,3));let s=w(k({},e),{network:this.network,amount:t,config:this.config});return(await this.client.post("/session",s)).data}catch(t){throw new Error(t)}}};r(p,"Session");var d=require("svix");var c=class{constructor(e){this.client=e}async register(e){try{return(await this.client.post("/webhook",e)).data}catch(t){throw new Error(t)}}async verify(e){let t=new d.Webhook(e.webhook_secret);try{await t.verify(e.payload,e.headers)}catch(s){throw new Error("Invalid webhook signature")}}};r(c,"Webhook");var S=_(require("axios"));var a=class{constructor(e){this.request=S.default.create({baseURL:b,headers:{Authorization:`Bearer ${e.api_key}`}})}async get(e,t){let s="?"+new URLSearchParams(t).toString();return this.request.get(`${e}?${s}`)}async post(e,t){return this.request.post(`${e}`,t)}};r(a,"Client");var h=class{constructor(e){this.client=new a(e),this.webhook=new c(this.client),this.session=new p(this.client,e.network,e.config)}};r(h,"CandyPay");0&&(module.exports={CandyPay});
//# sourceMappingURL=sdk.js.map